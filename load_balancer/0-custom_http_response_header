#!/usr/bin/env bash
# Install nginx and configure X-Served-By header with hostname

# Install nginx
apt-get update
apt-get install -y nginx

# Ensure hostname is set properly (example: 6949-web-01 / 6949-web-02)
# Replace this line if you need a specific hostname
hostnamectl set-hostname $(hostname)

# Add custom header
sed -i '/server_name _;/a \
    add_header X-Served-By $hostname;\n' /etc/nginx/sites-available/default

# Restart nginx (without systemctl)
service nginx restart
